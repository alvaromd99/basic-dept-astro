---
// Short video https://cdn.sanity.io/files/8nn8fua5/production/c6fb986a862cbe643c40cbdd0318ebc495efb187.mp4
// Long video https://cdn.sanity.io/files/8nn8fua5/production/4c749533161fc77c899a376ec6cd6da38973772f.mp4
import NavBar from "../components/NavBar.astro";
---

<header>
  <div class="cursor-container">
    <video
      src="https://cdn.sanity.io/files/8nn8fua5/production/c6fb986a862cbe643c40cbdd0318ebc495efb187.mp4"
      muted
      loop
      class="video"></video>
    <div class="custom-cursor"></div>
  </div>
  <NavBar />
</header>
<style>
  header {
    width: 100%;
    height: 100%;
    position: relative;
  }
  video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  .cursor-container {
    height: 100vh;
    position: relative;
  }
  .custom-cursor {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: red;
    position: absolute;
    transform: translate(-50%, -50%);
    display: none;
  }
</style>
<script>
  const containerElement = document.querySelector(
    ".cursor-container",
  ) as HTMLDivElement;
  const customCursor = document.querySelector(
    ".custom-cursor",
  ) as HTMLDivElement;

  const updateCursor = (event: MouseEvent) => {
    if (!containerElement || !customCursor) return;

    // Calculate the cursor position relative to the video element
    const rect = containerElement.getBoundingClientRect();
    const x = event.clientX - rect.left;
    const y = event.clientY - rect.top;

    const isInContainer =
      event.clientX >= rect.left &&
      event.clientX <= rect.right &&
      event.clientY >= rect.top &&
      event.clientY <= rect.bottom;

    if (isInContainer) {
      // Update the position of the custom cursor
      customCursor.style.left = `${x}px`;
      customCursor.style.top = `${y}px`;
    } else {
      customCursor.style.display = "none";
    }
  };
  const showCursor = () => {
    customCursor.style.display = "block";
  };

  const hideCursor = () => {
    customCursor.style.display = "none";
  };

  const centerCursor = () => {};

  document.addEventListener("DOMContentLoaded", () => {
    if (!containerElement) return;

    containerElement.addEventListener("mouseenter", showCursor);
    containerElement.addEventListener("mouseleave", hideCursor);
    containerElement.addEventListener("mousemove", updateCursor);
  });
</script>
